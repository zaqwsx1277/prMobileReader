\hypertarget{classunit_1_1_t_file_system}{}\section{Класс unit\+:\+:T\+File\+System}
\label{classunit_1_1_t_file_system}\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}


Класс для работы с файловой системой  




{\ttfamily \#include $<$T\+File\+System.\+hpp$>$}



Граф наследования\+:unit\+:\+:T\+File\+System\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=175pt]{classunit_1_1_t_file_system__inherit__graph}
\end{center}
\end{figure}


Граф связей класса unit\+:\+:T\+File\+System\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=175pt]{classunit_1_1_t_file_system__coll__graph}
\end{center}
\end{figure}
\subsection*{Открытые члены}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classunit_1_1_t_file_system_ac45162c4d69b6661aab204724af57322}{T\+File\+System} ()
\item 
\hyperlink{classunit_1_1_t_file_system_a87299dbbdea872b06972f1432ef9ef88}{$\sim$\+T\+File\+System} ()
\item 
bool \hyperlink{classunit_1_1_t_file_system_a0737b50d219570ae2e11ea17a32cc85c}{check} ()
\begin{DoxyCompactList}\small\item\em Проверка работоспособности S\+D-\/карточки \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classunit_1_1_t_file_system_a036085cc2f2674f9ea89426000b6ba02}\label{classunit_1_1_t_file_system_a036085cc2f2674f9ea89426000b6ba02}} 
void \hyperlink{classunit_1_1_t_file_system_a036085cc2f2674f9ea89426000b6ba02}{init} ()
\begin{DoxyCompactList}\small\item\em Инициализация устройства \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classunit_1_1_t_file_system_a4e4fd801d58a5c6b526a65ec5cb187dd}\label{classunit_1_1_t_file_system_a4e4fd801d58a5c6b526a65ec5cb187dd}} 
void \hyperlink{classunit_1_1_t_file_system_a4e4fd801d58a5c6b526a65ec5cb187dd}{sleep} ()
\begin{DoxyCompactList}\small\item\em Перевод в режим энергосбережения \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classunit_1_1_t_file_system_a99d5e06aee69d3674ea441f140f6a47b}\label{classunit_1_1_t_file_system_a99d5e06aee69d3674ea441f140f6a47b}} 
void \hyperlink{classunit_1_1_t_file_system_a99d5e06aee69d3674ea441f140f6a47b}{wakeup} ()
\begin{DoxyCompactList}\small\item\em Выход из режима энергосбережения \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classunit_1_1_t_file_system_af7969ea11284d9f6f093687f0ba90082}\label{classunit_1_1_t_file_system_af7969ea11284d9f6f093687f0ba90082}} 
bool \hyperlink{classunit_1_1_t_file_system_af7969ea11284d9f6f093687f0ba90082}{process} ()
\begin{DoxyCompactList}\small\item\em Получение данных \end{DoxyCompactList}\item 
void \hyperlink{classunit_1_1_t_file_system_aaf4766a6f4dcd6759e362ffc977615f5}{get\+Time} ()
\begin{DoxyCompactList}\small\item\em Синхронизация времени \end{DoxyCompactList}\item 
void \hyperlink{classunit_1_1_t_file_system_a79523b2edca3574ec6254af671f28256}{set\+Tag} ()
\begin{DoxyCompactList}\small\item\em Запись на SD ID сосканированной метки \end{DoxyCompactList}\item 
bool \hyperlink{classunit_1_1_t_file_system_aacd7aae1827432b04c06b9a1d440b949}{write\+Photo} ()
\begin{DoxyCompactList}\small\item\em Запись на SD изображения полученного с камеры \end{DoxyCompactList}\item 
bool \hyperlink{classunit_1_1_t_file_system_a01199e9b6421790c5954dbc69ef84ae2}{write\+Audio} (const uint8\+\_\+t $\ast$, const uint32\+\_\+t)
\begin{DoxyCompactList}\small\item\em Запись аудио блока на SD. \end{DoxyCompactList}\item 
void \hyperlink{classunit_1_1_t_file_system_ae30e2668ef7405051b427660fa866302}{close\+Audio} ()
\begin{DoxyCompactList}\small\item\em Запись размера в хидер аудио файла и завершение его записи \end{DoxyCompactList}\item 
bool \hyperlink{classunit_1_1_t_file_system_a80f8d844c27c27cb5998b2d2214d041a}{open\+File\+Name} (const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Формирование имени файла для записи звука и фото \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Подробное описание}
Класс для работы с файловой системой 

Класс для работы с файловой системой на S\+D-\/карточке. Он нужен только что-\/бы записывать туда фотки, аудио и метки. \begin{DoxyAttention}{Внимание}
Перед работой с файловой системой всегда необходимо инициальзировать SD карточку 
\end{DoxyAttention}


\subsection{Конструктор(ы)}
\mbox{\Hypertarget{classunit_1_1_t_file_system_ac45162c4d69b6661aab204724af57322}\label{classunit_1_1_t_file_system_ac45162c4d69b6661aab204724af57322}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!T\+File\+System@{T\+File\+System}}
\index{T\+File\+System@{T\+File\+System}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{T\+File\+System()}{TFileSystem()}}
{\footnotesize\ttfamily unit\+::\+T\+File\+System\+::\+T\+File\+System (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Монтируем файловую систему. \begin{DoxyAttention}{Внимание}
SD карта должна быть уже проинициализированна 
\end{DoxyAttention}
\mbox{\Hypertarget{classunit_1_1_t_file_system_a87299dbbdea872b06972f1432ef9ef88}\label{classunit_1_1_t_file_system_a87299dbbdea872b06972f1432ef9ef88}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!````~T\+File\+System@{$\sim$\+T\+File\+System}}
\index{````~T\+File\+System@{$\sim$\+T\+File\+System}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{$\sim$\+T\+File\+System()}{~TFileSystem()}}
{\footnotesize\ttfamily unit\+::\+T\+File\+System\+::$\sim$\+T\+File\+System (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyAttention}{Внимание}
Файловая система должна быть размонтирована всегда, в противном случае SD\textquotesingle{}шка убивается 
\end{DoxyAttention}


\subsection{Методы}
\mbox{\Hypertarget{classunit_1_1_t_file_system_a0737b50d219570ae2e11ea17a32cc85c}\label{classunit_1_1_t_file_system_a0737b50d219570ae2e11ea17a32cc85c}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!check@{check}}
\index{check@{check}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{check()}{check()}}
{\footnotesize\ttfamily bool unit\+::\+T\+File\+System\+::check (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Проверка работоспособности S\+D-\/карточки 

\begin{DoxyRefDesc}{Необходимо сделать}
\item[\hyperlink{todo__todo000008}{Необходимо сделать}]Приделать проверку записи и чтения тестового файла \end{DoxyRefDesc}
\begin{DoxyReturn}{Возвращает}
true если провека выполнилась 
\end{DoxyReturn}


Замещает \hyperlink{classunit_1_1_t_unit_abdcc6daabc86cea10abc96593d9d2c2a}{unit\+::\+T\+Unit}.

\mbox{\Hypertarget{classunit_1_1_t_file_system_ae30e2668ef7405051b427660fa866302}\label{classunit_1_1_t_file_system_ae30e2668ef7405051b427660fa866302}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!close\+Audio@{close\+Audio}}
\index{close\+Audio@{close\+Audio}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{close\+Audio()}{closeAudio()}}
{\footnotesize\ttfamily void unit\+::\+T\+File\+System\+::close\+Audio (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Запись размера в хидер аудио файла и завершение его записи 



 \mbox{\Hypertarget{classunit_1_1_t_file_system_aaf4766a6f4dcd6759e362ffc977615f5}\label{classunit_1_1_t_file_system_aaf4766a6f4dcd6759e362ffc977615f5}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!get\+Time@{get\+Time}}
\index{get\+Time@{get\+Time}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{get\+Time()}{getTime()}}
{\footnotesize\ttfamily void unit\+::\+T\+File\+System\+::get\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Синхронизация времени 

\begin{DoxyAttention}{Внимание}
Инициализацию Fat\+FS нужно проверять до вызова этого метода 
\end{DoxyAttention}
\mbox{\Hypertarget{classunit_1_1_t_file_system_a80f8d844c27c27cb5998b2d2214d041a}\label{classunit_1_1_t_file_system_a80f8d844c27c27cb5998b2d2214d041a}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!open\+File\+Name@{open\+File\+Name}}
\index{open\+File\+Name@{open\+File\+Name}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{open\+File\+Name()}{openFileName()}}
{\footnotesize\ttfamily bool unit\+::\+T\+File\+System\+::open\+File\+Name (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{in\+File\+Name }\end{DoxyParamCaption})}



Формирование имени файла для записи звука и фото 



 Формируется имя файла и он открывается 
\begin{DoxyParams}{Аргументы}
{\em in\+File\+Name} & Расширения для имени файла \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
true если файл сформировался и открылся 
\end{DoxyReturn}
\mbox{\Hypertarget{classunit_1_1_t_file_system_a79523b2edca3574ec6254af671f28256}\label{classunit_1_1_t_file_system_a79523b2edca3574ec6254af671f28256}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!set\+Tag@{set\+Tag}}
\index{set\+Tag@{set\+Tag}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{set\+Tag()}{setTag()}}
{\footnotesize\ttfamily void unit\+::\+T\+File\+System\+::set\+Tag (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Запись на SD ID сосканированной метки 

\begin{DoxyAttention}{Внимание}
Перед вызовом необходимо проверить, что Метка сосканирована и FS успешно инициализированна 
\end{DoxyAttention}
\mbox{\Hypertarget{classunit_1_1_t_file_system_a01199e9b6421790c5954dbc69ef84ae2}\label{classunit_1_1_t_file_system_a01199e9b6421790c5954dbc69ef84ae2}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!write\+Audio@{write\+Audio}}
\index{write\+Audio@{write\+Audio}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{write\+Audio()}{writeAudio()}}
{\footnotesize\ttfamily bool unit\+::\+T\+File\+System\+::write\+Audio (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{in\+Buf,  }\item[{const uint32\+\_\+t}]{in\+Buf\+Len }\end{DoxyParamCaption})}



Запись аудио блока на SD. 






\begin{DoxyParams}{Аргументы}
{\em in\+Buf} & Записываемые данные \\
\hline
{\em in\+Buf\+Len} & Длинна записываемых данных \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
Возвращает true при успешной записи 
\end{DoxyReturn}
\mbox{\Hypertarget{classunit_1_1_t_file_system_aacd7aae1827432b04c06b9a1d440b949}\label{classunit_1_1_t_file_system_aacd7aae1827432b04c06b9a1d440b949}} 
\index{unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}!write\+Photo@{write\+Photo}}
\index{write\+Photo@{write\+Photo}!unit\+::\+T\+File\+System@{unit\+::\+T\+File\+System}}
\subsubsection{\texorpdfstring{write\+Photo()}{writePhoto()}}
{\footnotesize\ttfamily bool unit\+::\+T\+File\+System\+::write\+Photo (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Запись на SD изображения полученного с камеры 



 Запись изображения на SD. \begin{DoxyReturn}{Возвращает}
true если запись выполнилась. 
\end{DoxyReturn}
Граф вызовов\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{classunit_1_1_t_file_system_aacd7aae1827432b04c06b9a1d440b949_cgraph}
\end{center}
\end{figure}


Объявления и описания членов классов находятся в файлах\+:\begin{DoxyCompactItemize}
\item 
Core/cpp/T\+File\+System.\+hpp\item 
Core/cpp/T\+File\+System.\+cpp\end{DoxyCompactItemize}
